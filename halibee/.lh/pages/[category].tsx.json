{
    "sourceFile": "pages/[category].tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1632345332005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1632345364509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,74 @@\n+import { query, where, getDocs, collection } from \"@firebase/firestore\";\r\n+import { GetStaticPaths, GetStaticProps } from \"next\";\r\n+import { useRouter } from \"next/router\";\r\n+import { useEffect, useState } from \"react\";\r\n+import Listings from \"../components/listings\";\r\n+import { firestore } from \"../../modules/firebase/initialiseFirebase\";\r\n+\r\n+\r\n+export const getStaticProps: GetStaticProps = async () => {\r\n+    const response = await getDocs(collection(firestore, \"categories\"))\r\n+    const categories = []\r\n+\r\n+    response.forEach((doc: any) => {\r\n+        categories.push(doc._document.data.value.mapValue.fields)\r\n+    })\r\n+\r\n+\r\n+    return {\r\n+        props: { categories }\r\n+    }\r\n+\r\n+}\r\n+\r\n+export const getStaticPaths: GetStaticPaths = async () => {\r\n+    const response: any = await getDocs(collection(firestore, \"categories\"))\r\n+    const more_paths = []\r\n+    response.forEach((doc: any) => {\r\n+        more_paths.push('categories/' + doc._document.data.value.mapValue.fields.skill.stringValue)\r\n+    })\r\n+    return {\r\n+        \r\n+        paths: more_paths,\r\n+        fallback: false\r\n+    }\r\n+}\r\n+\r\n+export default function () {\r\n+    const [userData, setUserData] = useState(null)\r\n+    const router = useRouter()\r\n+    const { category } = router.query\r\n+\r\n+    console.log(category)\r\n+\r\n+    useEffect(() => {\r\n+        async function fetchUserData() {\r\n+            const response = await getDocs(\r\n+                query(collection\r\n+                    (firestore, \"freelancers\"),\r\n+                    where(\"category\", \"==\", category)))\r\n+            const freelancers = response.docs\r\n+            const data = []\r\n+            freelancers.forEach((doc: any) => {\r\n+                data.push(doc._document.data.value.mapValue.fields)\r\n+              })\r\n+\r\n+              setUserData(data)\r\n+        }\r\n+\r\n+        fetchUserData()\r\n+    }, [])\r\n+    \r\n+    console.log(userData)\r\n+    if (userData === null) {\r\n+        return (\r\n+            <div className=\"p-40\">Coming Soon</div>\r\n+        )\r\n+    }\r\n+\r\n+    return (\r\n+        <div className=\"p-10\">\r\n+            <Listings title={category} featured={userData} />\r\n+        </div>\r\n+    );\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1632345332004,
            "name": "Commit-0",
            "content": "import { query, where, getDocs, collection } from \"@firebase/firestore\";\r\nimport { GetStaticPaths, GetStaticProps } from \"next\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Listings from \"../components/listings\";\r\nimport { firestore } from \"../../modules/firebase/initialiseFirebase\";\r\n\r\n\r\nexport const getStaticProps: GetStaticProps = async () => {\r\n    const response = await getDocs(collection(firestore, \"categories\"))\r\n    const categories = []\r\n\r\n    response.forEach((doc: any) => {\r\n        categories.push(doc._document.data.value.mapValue.fields)\r\n    })\r\n\r\n\r\n    return {\r\n        props: { categories }\r\n    }\r\n\r\n}\r\n\r\nexport const getStaticPaths: GetStaticPaths = async () => {\r\n    const response: any = await getDocs(collection(firestore, \"categories\"))\r\n    const more_paths = []\r\n    response.forEach((doc: any) => {\r\n        more_paths.push('categories/' + doc._document.data.value.mapValue.fields.skill.stringValue)\r\n    })\r\n    return {\r\n        \r\n        paths: more_paths,\r\n        fallback: false\r\n    }\r\n}\r\n\r\nexport default function () {\r\n    const [userData, setUserData] = useState(null)\r\n    const router = useRouter()\r\n    const { category } = router.query\r\n\r\n    console.log(category)\r\n\r\n    useEffect(() => {\r\n        async function fetchUserData() {\r\n            const response = await getDocs(\r\n                query(collection\r\n                    (firestore, \"freelancers\"),\r\n                    where(\"category\", \"==\", category)))\r\n            const freelancers = response.docs\r\n            const data = []\r\n            freelancers.forEach((doc: any) => {\r\n                data.push(doc._document.data.value.mapValue.fields)\r\n              })\r\n\r\n              setUserData(data)\r\n        }\r\n\r\n        fetchUserData()\r\n    }, [])\r\n    \r\n    console.log(userData)\r\n    if (userData === null) {\r\n        return (\r\n            <div className=\"p-40\">Coming Soon</div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-10\">\r\n            <Listings title={category} featured={userData} />\r\n        </div>\r\n    );\r\n}"
        }
    ]
}